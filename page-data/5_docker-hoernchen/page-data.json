{"componentChunkName":"component---src-templates-blog-post-js","path":"/5_docker-hoernchen/","result":{"data":{"markdownRemark":{"html":"<p>Dies ist eine Weiterentwicklung des Ansatzes von <a href=\"https://twitter.com/m_andrasch\">Matthis Andrasch</a> Prototypen eines OER-Indexes (<a href=\"https://github.com/programmieraffe/oerhoernchen20\">oerhoernchen20</a>).\nIch habe eine ETL-Pipeline erstellt, die Inhalte von anderen Repos crawlt, die Metadaten in einer Datenbank speichert und anschließend in eine Elasticsearch-Instanz überführt.\nDas gesamte Projekt ist dockerisiert und lässt sich dadurch einfach nachnutzen und weiterentwickeln.\nTeile des Projektes und der Ideen werden von der TIB Hannover in ihrem Projekt <a href=\"https://gitlab.com/TIBHannover/oer/oersi-setup\"> \"OER Search Index\" </a> und dem Projekt <a href=\"https://wirlernenonline.de\">wirlernenonline.de</a> (<a href=\"https://github.com/openeduhub\">Git-Repo</a>) nachgenutzt.</p>\n<hr>\n<h2 id=\"details-from-readme\" style=\"position:relative;\"><a href=\"#details-from-readme\" aria-label=\"details from readme permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Details (from README)</h2>\n<p>This project is a dockerized version of the <a href=\"https://github.com/programmieraffe/oerhoernchen20\">oerhoernchen20</a> made by <a href=\"https://twitter.com/m_andrasch\">Matthias Andrasch</a>. It tries to combine the central OER search engine approach proprosed by Matthias with the <a href=\"https://ebildungslabor.de/blog/oersuchtool/\">personalized search engine</a> approach proposed by <a href=\"https://twitter.com/eBildungslabor\">Nele Hirsch</a> as it is also possible to insert ones own data to the search engines index.</p>\n<p>The general idea of this prototype is to establish a example pipeline of how a OER search engine could work.</p>\n<p>This <strong>PROTOTYPE</strong> is based on the following technologies all packed into docker-containers (beside the the scapy-crawler):</p>\n<ul>\n<li>\n<p><strong>Scrapy</strong>: First OER repositories are crawled using <strong><a href=\"http://scrapy.org/\">Scrapy</a></strong>. Currently the following repositories are crawled:</p>\n<ul>\n<li><a href=\"https://www.hoou.de/\">HOOU</a></li>\n<li>a bit of <a href=\"https://open-educational-resources.de/\">OERinfo</a></li>\n<li><a href=\"https://av.tib.eu\">TIB-AV-Portal</a></li>\n<li><a href=\"https://digill.de/\">digiLL</a></li>\n<li><a href=\"https://open.ruhr-uni-bochum.de\">OpenRUB</a></li>\n<li><a href=\"https://mediathek.hhu.de/\">HHU-Mediathek</a></li>\n<li>MOOCs of <a href=\"https://www.oncampus.de/\">oncampus</a></li>\n<li><a href=\"https://uni-tuebingen.oerbw.de\">ZOERR</a></li>\n</ul>\n<p>Entries without a proper license are skipped and not stored). The results are stored in a MySQL database.</p>\n</li>\n<li><strong>MySQL</strong>: Used to store the results of the crawl.</li>\n<li><strong>Logstash</strong>: Logstash is regulary checking the MySQL database, if any new items are added or changes are made to existing entries.</li>\n<li><strong>Elasticsearch</strong>: Elasticsearch is the search engine and indexes the input it gets from Logstash.</li>\n<li><strong>VueJS</strong>: The WebApp is made with VueJS and using <a href=\"https://docs.appbase.io/docs/reactivesearch/vue/overview/QuickStart/\">ReactSearch</a> to connect to Elasticsearch. It provides the user interface to make search queries or add items to Elasticsearch. It is deployed using Nginx, which also provides some reverse proxy services to connect the App with the Docker network.</li>\n</ul>\n<h2 id=\"run-it-locally\" style=\"position:relative;\"><a href=\"#run-it-locally\" aria-label=\"run it locally permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Run it locally</h2>\n<h3 id=\"oerhörnchen-20\" style=\"position:relative;\"><a href=\"#oerh%C3%B6rnchen-20\" aria-label=\"oerhörnchen 20 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>OERhörnchen 2.0</h3>\n<ul>\n<li>make sure you have git installed (<a href=\"https://www.atlassian.com/git/tutorials/install-git\">https://www.atlassian.com/git/tutorials/install-git</a>)</li>\n<li>make sure you have <a href=\"https://docs.docker.com/install/\">Docker installed</a></li>\n<li><code class=\"language-text\">git clone</code></li>\n<li><code class=\"language-text\">cd oerhoernchen20_docker/docker_hoernchen</code></li>\n<li><code class=\"language-text\">docker-compose up</code> this may take a while on the first run as some images will have to be build.</li>\n<li>after a few minutes you should be able to go to <a href=\"http://localhost\">http://localhost</a> and see your \"OERhörnchen 2.0\" instance ready (if it still says \"Loading entries\" you might just have to wait a bit longer)</li>\n<li>(for DockerPros: Don't get confused with the indexer-contaier throwing some errors at the beginning. It is started right at the beginning and looking for Elasticsearch, even if it's not ready yet. It stops throwing errors after a minute or so. Have to fix this, shouldn't be too complicated.)</li>\n</ul>\n<h3 id=\"crawler\" style=\"position:relative;\"><a href=\"#crawler\" aria-label=\"crawler permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Crawler</h3>\n<ul>\n<li>make sure you have python3 installed (<a href=\"https://docs.python-guide.org/starting/install3/osx/\">https://docs.python-guide.org/starting/install3/osx/</a>)</li>\n<li>go to project root</li>\n<li><code class=\"language-text\">cd oer_scrapy</code></li>\n<li><code class=\"language-text\">python -m venv oerhoernchen</code></li>\n<li><code class=\"language-text\">source oerhoernchen/bin/activate</code></li>\n<li><code class=\"language-text\">pip3 install -r requirements.txt</code></li>\n<li>crawler can be run with <code class=\"language-text\">scrapy crawl hoou_spider</code>. It assumes that you have the MySQL database running, so you should run the <code class=\"language-text\">docker-compose up</code> command from before.</li>\n</ul>\n<h2 id=\"metadata\" style=\"position:relative;\"><a href=\"#metadata\" aria-label=\"metadata permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Metadata</h2>\n<ul>\n<li>The mapping in Elasticsearch currently uses the LRMI as used by the HOOU <a href=\"https://www.dublincore.org/specifications/lrmi/lrmi_terms/\">LRMI (Learning Resource Metadata Initiative)</a>.</li>\n</ul>\n<h2 id=\"additional-notices\" style=\"position:relative;\"><a href=\"#additional-notices\" aria-label=\"additional notices permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Additional notices</h2>\n<h3 id=\"sitemaps-for-the-crawler\" style=\"position:relative;\"><a href=\"#sitemaps-for-the-crawler\" aria-label=\"sitemaps for the crawler permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Sitemaps for the crawler</h3>\n<ul>\n<li>ZOERR: <a href=\"https://uni-tuebingen.oerbw.de/edu-sharing/eduservlet/sitemap?from=0#osds\">https://uni-tuebingen.oerbw.de/edu-sharing/eduservlet/sitemap?from=0#osds</a></li>\n</ul>\n<h3 id=\"database\" style=\"position:relative;\"><a href=\"#database\" aria-label=\"database permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Database</h3>\n<h4 id=\"creating-a-mysql-database-dump-with-docker-container\" style=\"position:relative;\"><a href=\"#creating-a-mysql-database-dump-with-docker-container\" aria-label=\"creating a mysql database dump with docker container permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Creating a mysql database dump with docker container</h4>\n<ul>\n<li><code class=\"language-text\">docker exec some-mysql sh -c &#39;exec mysqldump --all-databases -uroot -p&quot;$MYSQL_ROOT_PASSWORD&quot;&#39; &gt; /some/path/on/your/host/all-databases.sql</code></li>\n</ul>\n<h3 id=\"vue-hörnchen\" style=\"position:relative;\"><a href=\"#vue-h%C3%B6rnchen\" aria-label=\"vue hörnchen permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Vue Hörnchen</h3>\n<h4 id=\"ressources\" style=\"position:relative;\"><a href=\"#ressources\" aria-label=\"ressources permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Ressources</h4>\n<ul>\n<li><a href=\"https://docs.appbase.io/docs/reactivesearch/vue/overview/QuickStart/\">https://docs.appbase.io/docs/reactivesearch/vue/overview/QuickStart/</a></li>\n<li><a href=\"https://opensource.appbase.io/reactive-manual/getting-started/reactivebase.html\">Getting started guide</a></li>\n</ul>\n<h3 id=\"multiple-database-inputs-via-logstash\" style=\"position:relative;\"><a href=\"#multiple-database-inputs-via-logstash\" aria-label=\"multiple database inputs via logstash permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Multiple database inputs via logstash</h3>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/37613611/multiple-inputs-on-logstash-jdbc\">https://stackoverflow.com/questions/37613611/multiple-inputs-on-logstash-jdbc</a></li>\n</ul>\n<h3 id=\"duplicate-detection\" style=\"position:relative;\"><a href=\"#duplicate-detection\" aria-label=\"duplicate detection permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Duplicate detection</h3>\n<ul>\n<li>\n<p>logstash Fingerprint vor duplicate detection?</p>\n<ul>\n<li><a href=\"https://www.elastic.co/de/blog/logstash-lessons-handling-duplicates\">https://www.elastic.co/de/blog/logstash-lessons-handling-duplicates</a></li>\n<li><a href=\"https://www.elastic.co/de/blog/efficient-duplicate-prevention-for-event-based-data-in-elasticsearch\">https://www.elastic.co/de/blog/efficient-duplicate-prevention-for-event-based-data-in-elasticsearch</a></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"license\" style=\"position:relative;\"><a href=\"#license\" aria-label=\"license permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>License</h2>\n<p>Just take it.</p>\n<p xmlns:dct=\"http://purl.org/dc/terms/\" xmlns:vcard=\"http://www.w3.org/2001/vcard-rdf/3.0#\">\n  <a rel=\"license\"\n     href=\"http://creativecommons.org/publicdomain/zero/1.0/\">\n    <img src=\"http://i.creativecommons.org/p/zero/1.0/88x31.png\" style=\"border-style: none;\" alt=\"CC0\" />\n  </a>\n  <br />\n  To the extent possible under law,\n  <a rel=\"dct:publisher\"\n     href=\"https://github.com/sroertgen/oerhoernchen20_docker\">\n    <span property=\"dct:title\">Steffen Rörtgen</span></a>\n  has waived all copyright and related or neighboring rights to\n  <span property=\"dct:title\">Docker-Hoernchen 2.0</span>.\nThis work is published from:\n<span property=\"vcard:Country\" datatype=\"dct:ISO3166\"\n      content=\"DE\" about=\"https://github.com/sroertgen/oerhoernchen20_docker\">\n  Deutschland</span>.\n</p>","frontmatter":{"title":"Docker hOERnchen 2.0","link":"https://github.com/sroertgen/oerhoernchen20_docker"}}},"pageContext":{"slug":"/5_docker-hoernchen/"}},"staticQueryHashes":["3159585216"]}